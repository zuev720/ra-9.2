(this["webpackJsonpra-9.2"]=this["webpackJsonpra-9.2"]||[]).push([[0],{25:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(17),r=c.n(a),o=(c(25),c(20)),i=c(7),u=c(2),j=c(8),l=c(12),h=c.n(l);var d=c(0);function b(){var e=Object(u.g)(),t=function(){return Object(d.jsx)("div",{className:"CreatePostBlock",children:Object(d.jsx)(i.b,{to:"/posts/new",className:"createPostButton",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})})},c=function(t){var c=h()(t.create).format("YYYYMMDD"),n=h()(c,"YYYYMMDD").fromNow();return Object(d.jsxs)("li",{className:"Post",children:[t.error&&e.replace("/error"),Object(d.jsxs)("div",{className:"UserInfoBlock",children:[Object(d.jsx)("img",{className:"UserImage",src:t.img,alt:"user"}),Object(d.jsxs)("div",{className:"PostInfoBlock",children:[Object(d.jsx)("p",{className:"UserName",children:t.name}),Object(d.jsx)("p",{className:"created",children:n})]})]}),Object(d.jsx)(i.b,{to:{pathname:"/posts/".concat(t.id),propsSearch:t},className:"TextPostBlock",children:Object(d.jsx)("p",{className:"TextPost",children:t.content})})]})},s=function(e){return Object(d.jsxs)("ul",{children:[e.loading&&Object(d.jsx)("p",{children:"...Loading"}),e.data&&e.data.map((function(e){return Object(d.jsx)(c,{id:e.id,img:e.img,name:e.name,content:e.content,create:e.create},e.id)}))]})},a=function(){var e=function(e,t){var c=Object(n.useState)(!1),s=Object(j.a)(c,2),a=s[0],r=s[1],o=Object(n.useState)(null),i=Object(j.a)(o,2),u=i[0],l=i[1],h=Object(n.useState)(null),d=Object(j.a)(h,2),b=d[0],p=d[1];return Object(n.useEffect)((function(){r({loading:!0});try{fetch(e,t).then((function(e){return e.json()})).then((function(e){return l(e)}))}catch(b){p(b)}finally{r(!1)}}),[]),[a,u,b]}("https://ra-9-backend.herokuapp.com/posts/",{method:"GET"}),c=Object(j.a)(e,3),a=c[0],r=c[1],o=c[2];return Object(d.jsxs)("div",{className:"PostsPage",children:[Object(d.jsx)(t,{}),Object(d.jsx)(s,{loading:a,data:r,error:o})]})};return Object(d.jsx)(a,{})}c(36);var p=c(9),m=c.n(p),O=c(11);function x(e){return Object(d.jsx)("button",{className:e.className,onClick:e.onClick,children:e.children})}c(38);function f(e){return Object(d.jsx)("textarea",{name:e.className,className:e.className,value:e.value,onChange:e.onChange})}function N(){var e=Object(u.g)(),t=Object(n.useState)(""),c=Object(j.a)(t,2),s=c[0],a=c[1],r=function(){var t=Object(O.a)(m.a.mark((function t(){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==s.trim()){t.next=2;break}return t.abrupt("return",null);case 2:return c={id:0,content:s.trim()},t.next=5,fetch("https://ra-9-backend.herokuapp.com/posts/",{method:"POST",body:JSON.stringify(c)}).then((function(t){204===t.status?e.push("/"):e.push("/error")}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"PostCreatePage",children:[Object(d.jsx)(f,{className:"CreatePostTextArea",value:s,onChange:function(e){return a(e.target.value)}}),Object(d.jsx)(x,{className:"LeaveCreatePageButton",onClick:function(){return e.push("/")},children:"\u2718"}),Object(d.jsx)(x,{className:"CreatePostButton",onClick:r,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})]})}c(39);function v(e){var t=Object(u.g)(),c=e.location.propsSearch;c||t.push("/error");var n=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ra-9-backend.herokuapp.com/posts/"+c.id,{method:"DELETE"}).then((function(e){204===e.status?t.push("/"):t.push("/error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=h()(c.create).format("YYYYMMDD"),a=h()(s,"YYYYMMDD").fromNow();return Object(d.jsxs)("div",{className:"PostPage",children:[Object(d.jsxs)("div",{className:"UserInfoBlock",children:[Object(d.jsx)("img",{className:"UserImage",src:c.img,alt:"user"}),Object(d.jsxs)("div",{className:"PostInfoBlock",children:[Object(d.jsx)("p",{className:"UserName",children:c.name}),Object(d.jsx)("p",{className:"created",children:a})]})]}),Object(d.jsx)("div",{className:"TextPostBlock",children:Object(d.jsx)("p",{className:"TextPost",children:c.content})}),Object(d.jsxs)("div",{className:"PostButtonsBlock",children:[Object(d.jsx)(i.b,{to:{pathname:"/posts/edit/".concat(c.id),propsSearch:c},className:"PostChange",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(d.jsx)("button",{type:"button",className:"PostDelete",onClick:n,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}c(40);function g(e){var t=Object(u.g)(),c=e.location.propsSearch;c||t.push("/error");var s=Object(n.useState)(c.content),a=Object(j.a)(s,2),r=a[0],o=a[1],l=function(){var e=Object(O.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:c.id,content:r},e.next=3,fetch("https://ra-9-backend.herokuapp.com/posts/",{method:"POST",body:JSON.stringify(n)}).then((function(e){204===e.status?t.replace("/"):t.replace("/error")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"EditPostPage",children:[Object(d.jsx)("div",{className:"HeaderBlock",children:Object(d.jsx)("h3",{className:"header",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044e"})}),Object(d.jsx)(i.b,{to:{pathname:"/posts/".concat(c.id),propsSearch:c},className:"LeaveEditPageButton",children:"\u2718"}),Object(d.jsx)(f,{className:"EditTextArea",value:r,onChange:function(e){return o(e.target.value)},focus:!0}),Object(d.jsx)(x,{className:"PostChangeButton",onClick:l,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}c(41);function P(){return Object(d.jsx)("div",{className:"ErrorPage",children:Object(d.jsx)("h1",{className:"ErrorPageText",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})}var k=function(){return Object(d.jsx)(i.a,{basename:"/ra-9.2",children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.b,{path:"/posts/edit/:id",component:g}),Object(d.jsx)(u.b,{path:"/posts/new",component:N}),Object(d.jsx)(u.b,{path:"/posts/:id",component:function(e){return Object(d.jsx)(v,Object(o.a)({},e))}}),Object(d.jsx)(u.b,{path:"/error",component:P}),Object(d.jsx)(u.b,{exact:!0,path:"/posts",component:b}),Object(d.jsx)(u.a,{to:"/posts"})]})})})},C=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,43)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root")),C()}},[[42,1,2]]]);
//# sourceMappingURL=main.0cf5004c.chunk.js.map